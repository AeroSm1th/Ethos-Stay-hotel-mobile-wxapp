<!--pages/detail/detail.wxml-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- é…’åº—è¯¦æƒ…å†…å®¹ -->
  <view wx:else class="detail-content">
    <!-- é¡¶éƒ¨å¯¼èˆªæ ï¼ˆæ»šåŠ¨åæ˜¾ç¤ºï¼‰ -->
    <view class="nav-header {{showNavHeader ? 'show' : ''}}">
      <view class="nav-left" bindtap="onBack">
        <text class="icon-back">â†</text>
      </view>
      <view class="nav-title">{{hotel.nameCn}}</view>
      <view class="nav-right">
        <text class="icon-collect {{collected ? 'active' : ''}}" bindtap="handleCollect">â™¥</text>
        <text class="icon-share" bindtap="onShareAppMessage">â‡§</text>
      </view>
    </view>

    <!-- å›¾ç‰‡è½®æ’­ -->
    <view class="image-swiper-container">
      <swiper 
        class="image-swiper" 
        indicator-dots="{{true}}"
        indicator-color="rgba(255, 255, 255, 0.5)"
        indicator-active-color="#0086f6"
        autoplay="{{false}}"
        circular="{{true}}"
        bindchange="onSwiperChange"
      >
        <swiper-item wx:for="{{hotel.images}}" wx:key="id">
          <image class="swiper-image" src="{{item.imageUrl}}" mode="aspectFill" lazy-load="{{true}}" />
        </swiper-item>
      </swiper>
      <view class="image-indicator">{{currentImageIndex + 1}}/{{hotel.images.length}}</view>
    </view>

    <!-- åŸºæœ¬ä¿¡æ¯ -->
    <view class="basic-info">
      <view class="hotel-name">{{hotel.nameCn}}</view>
      <view class="hotel-star">
        <text class="star-text">{{hotel.starRating}}æ˜Ÿçº§</text>
      </view>
      <view class="hotel-address">
        <text class="icon-location">ğŸ“</text>
        <text class="address-text">{{hotel.address}}</text>
      </view>
      <view class="hotel-rating">
        <text class="rating-score">4.5</text>
        <text class="rating-label">éå¸¸å¥½</text>
        <text class="rating-count">ï¼ˆ1234æ¡ç‚¹è¯„ï¼‰</text>
      </view>
    </view>

    <!-- é…’åº—ç‰¹è‰² -->
    <view class="hotel-features" wx:if="{{hotel.facilities && hotel.facilities.length > 0}}">
      <view class="section-title">é…’åº—è®¾æ–½</view>
      <view class="feature-tags">
        <text class="feature-tag" wx:for="{{hotel.facilities}}" wx:key="index">{{item}}</text>
      </view>
    </view>

    <!-- é…’åº—ä»‹ç» -->
    <view class="hotel-description" wx:if="{{hotel.description}}">
      <view class="section-title">é…’åº—ä»‹ç»</view>
      <view class="description-text">{{hotel.description}}</view>
    </view>

    <!-- é™„è¿‘æ™¯ç‚¹ -->
    <view class="nearby-attractions" wx:if="{{hotel.nearbyAttractions && hotel.nearbyAttractions.length > 0}}">
      <view class="section-title">é™„è¿‘æ™¯ç‚¹</view>
      <view class="attraction-list">
        <text class="attraction-item" wx:for="{{hotel.nearbyAttractions}}" wx:key="index">â€¢ {{item}}</text>
      </view>
    </view>

    <!-- æ—¥æœŸé€‰æ‹© -->
    <view class="date-selector">
      <view class="section-title">å…¥ä½æ—¥æœŸ</view>
      <view class="date-row">
        <view class="date-item" bindtap="showDatePicker" data-type="checkIn">
          <text class="date-label">å…¥ä½</text>
          <text class="date-value">{{checkIn}}</text>
        </view>
        <view class="date-divider">
          <text class="nights-text">å…±{{nights}}æ™š</text>
        </view>
        <view class="date-item" bindtap="showDatePicker" data-type="checkOut">
          <text class="date-label">ç¦»åº—</text>
          <text class="date-value">{{checkOut}}</text>
        </view>
      </view>
    </view>

    <!-- æˆ¿å‹åˆ—è¡¨ -->
    <view class="room-types" id="roomTypes">
      <view class="section-title">æˆ¿å‹é€‰æ‹©</view>
      <view class="room-list">
        <view class="room-card" wx:for="{{hotel.roomTypes}}" wx:key="id">
          <image class="room-image" src="{{item.imageUrl || '/images/placeholder.png'}}" mode="aspectFill" lazy-load="{{true}}" />
          <view class="room-info">
            <view class="room-name">{{item.name}}</view>
            <view class="room-details">
              <text class="room-detail-item" wx:if="{{item.bedType}}">{{item.bedType}}</text>
              <text class="room-detail-item" wx:if="{{item.roomSize}}">{{item.roomSize}}ã¡</text>
              <text class="room-detail-item" wx:if="{{item.maxGuests}}">{{item.maxGuests}}äºº</text>
            </view>
            <view class="room-amenities" wx:if="{{item.amenities && item.amenities.length > 0}}">
              <text class="amenity-tag" wx:for="{{item.amenities}}" wx:for-item="amenity" wx:key="index">{{amenity}}</text>
            </view>
          </view>
          <view class="room-price">
            <text class="price-value">Â¥{{item.price}}</text>
            <text class="price-unit">/æ™š</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨æ“ä½œæ  -->
    <view class="bottom-bar">
      <view class="price-info">
        <text class="price-label">æœ€ä½ä»·</text>
        <text class="price-value">Â¥{{hotel.roomTypes && hotel.roomTypes.length > 0 ? hotel.roomTypes[0].price : 0}}</text>
      </view>
      <button class="btn-book" bindtap="scrollToRooms">æŸ¥çœ‹æˆ¿å‹</button>
    </view>
  </view>
</view>
